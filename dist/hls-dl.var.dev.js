/*! For license information please see hls-dl.var.dev.js.LICENSE.txt */
var hlsDl;hlsDl=(()=>{var t={506:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},154:t=>{function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},e.apply(this,arguments)}t.exports=e},354:t=>{t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}},927:(t,e,i)=>{"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=r(i(908));t.exports=function(t){for(var e,i=(e=t,n.default.atob?n.default.atob(e):Buffer.from(e,"base64").toString("binary")),r=new Uint8Array(i.length),a=0;a<i.length;a++)r[a]=i.charCodeAt(a);return r}},388:t=>{"use strict";var e=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var i=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(i,1),i>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var i=e.length,r=0;r<i;++r)e[r].call(this,arguments[1]);else for(var n=Array.prototype.slice.call(arguments,1),a=e.length,s=0;s<a;++s)e[s].apply(this,n)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}();t.exports=e},908:(t,e,i)=>{var r;r="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},t.exports=r},758:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LineStream:()=>l,ParseStream:()=>h,Parser:()=>m});var r=i(354),n=i.n(r),a=i(388),s=i.n(a),u=i(154),o=i.n(u),c=i(506),d=i.n(c),f=i(927),g=i.n(f),l=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return n()(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(s()),p=function(t){for(var e,i=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},n=i.length;n--;)""!==i[n]&&((e=/([^=]*)=(.*)/.exec(i[n]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),r[e[0]]=e[1]);return r},h=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}n()(e,t);var i=e.prototype;return i.push=function(t){var e,i,r=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((function(e,i){var r=i(t);return r===t?e:e.concat([r])}),[t]).forEach((function(t){for(var n=0;n<r.customParsers.length;n++)if(r.customParsers[n].call(r,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void r.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"totalduration"},e[1]&&(i.duration=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void r.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void r.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"byterange"},e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),void r.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void r.trigger("data",i);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"map"},e[1]){var a=p(e[1]);if(a.URI&&(i.uri=a.URI),a.BYTERANGE){var s=a.BYTERANGE.split("@"),u=s[0],o=s[1];i.byterange={},u&&(i.byterange.length=parseInt(u,10)),o&&(i.byterange.offset=parseInt(o,10))}}r.trigger("data",i)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(i={type:"tag",tagType:"stream-inf"},e[1]){if(i.attributes=p(e[1]),i.attributes.RESOLUTION){var c=i.attributes.RESOLUTION.split("x"),d={};c[0]&&(d.width=parseInt(c[0],10)),c[1]&&(d.height=parseInt(c[1],10)),i.attributes.RESOLUTION=d}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}r.trigger("data",i)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=p(e[1])),void r.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))r.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void r.trigger("data",i);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return i={type:"tag",tagType:"key"},e[1]&&(i.attributes=p(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void r.trigger("data",i);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return i={type:"tag",tagType:"start"},e[1]&&(i.attributes=p(e[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),void r.trigger("data",i);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void r.trigger("data",i);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void r.trigger("data",i);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void r.trigger("data",i);r.trigger("data",{type:"tag",data:t.slice(4)})}}}else r.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))},i.addParser=function(t){var e=this,i=t.expression,r=t.customType,n=t.dataParser,a=t.segment;"function"!=typeof n&&(n=function(t){return t}),this.customParsers.push((function(t){if(i.exec(t))return e.trigger("data",{type:"custom",data:n(t),customType:r,segment:a}),!0}))},i.addTagMapper=function(t){var e=t.expression,i=t.map;this.tagMappers.push((function(t){return e.test(t)?i(t):t}))},e}(s()),m=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new l,e.parseStream=new h,e.lineStream.pipe(e.parseStream);var i,r,n=d()(e),a=[],s={},u=function(){},c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},f=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var p=0;return e.parseStream.on("data",(function(t){var e,d;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(s.byterange=e,e.length=t.length,"offset"in t||(t.offset=p)),"offset"in t&&(s.byterange=e,e.offset=t.offset),p=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(s.duration=t.duration),0===t.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:g()(t.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(r.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,f=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){i={},t.uri&&(i.uri=t.uri),t.byterange&&(i.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes?(s.attributes||(s.attributes={}),o()(s.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var i=this.manifest.mediaGroups[t.attributes.TYPE];i[t.attributes["GROUP-ID"]]=i[t.attributes["GROUP-ID"]]||{},e=i[t.attributes["GROUP-ID"]],(d={default:/yes/i.test(t.attributes.DEFAULT)}).default?d.autoselect=!0:d.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(d.language=t.attributes.LANGUAGE),t.attributes.URI&&(d.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(d.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(d.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(d.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=d}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){f+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),s.dateTimeString=t.dateTimeString,s.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=t.data},"cue-out-cont":function(){s.cueOutCont=t.data},"cue-in":function(){s.cueIn=t.data}}[t.tagType]||u).call(n)},uri:function(){s.uri=t.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),r&&(s.key=r),s.timeline=f,i&&(s.map=i),s={}},comment:function(){},custom:function(){t.segment?(s.custom=s.custom||{},s.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(n)})),e}n()(e,t);var i=e.prototype;return i.push=function(t){this.lineStream.push(t)},i.end=function(){this.lineStream.push("\n")},i.addParser=function(t){this.parseStream.addParser(t)},i.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(s())},607:function(t,e,i){var r,n,a=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(n,a){function s(t){try{o(r.next(t))}catch(t){a(t)}}function u(t){try{o(r.throw(t))}catch(t){a(t)}}function o(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,u)}o((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var i,r,n,a,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};r=[i,e,i(758)],void 0===(n=function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.downloadToFile=e.download=void 0,e.download=function(t){return a(void 0,void 0,void 0,(function(){var e,r,n;return s(this,(function(u){switch(u.label){case 0:return t.url?[4,(c=t.url,a(void 0,void 0,void 0,(function(){return s(this,(function(t){return[2,fetch(c).then((function(t){if(!t.ok)throw Error(t.statusText);return t.text()}))]}))})))]:[3,2];case 1:e=u.sent(),u.label=2;case 2:if(!t.url&&!t.m3u8)throw new Error("No url or m3u8 string specified");if(0===(r=function(t){var e=new i.Parser;return e.push(t),e.end(),e.manifest}(e)).segments.length)throw new Error("Got an invalid M3U8 file, check the provided URL or m3u8 string is valid");return[4,(o=r,a(void 0,void 0,void 0,(function(){var t,e;return s(this,(function(i){switch(i.label){case 0:return t=o.segments.map((function(t){return t.uri})),e=t.map((function(t){return a(void 0,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,fetch(t).then((function(t){if(!t.ok)throw Error(t.statusText);if("audio/mpeg"===t.headers.get("Content-Type").toLowerCase())throw Error("Got invalid Content-Type while downloading HLS segments: "+t.headers.get("Content-Type"));return t.arrayBuffer()}))];case 1:return[2,e.sent()]}}))}))})),[4,Promise.all(e)];case 1:return[2,i.sent()]}}))})))];case 3:return n=u.sent(),[2,new Blob(n)]}var o,c}))}))},e.downloadToFile=function(t,i){return a(void 0,void 0,void 0,(function(){var r,n,a,u;return s(this,(function(s){switch(s.label){case 0:return[4,e.download(t)];case 1:return r=s.sent(),n=window.URL||window.webkitURL,a=n.createObjectURL(r),(u=document.createElement("a")).style.display="none",u.href=a,u.download=i,document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(a),[2]}}))}))}}.apply(e,r))||(t.exports=n)}},e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}return i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9obHNEbC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qcyIsIndlYnBhY2s6Ly9obHNEbC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHMuanMiLCJ3ZWJwYWNrOi8vaGxzRGwvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0c0xvb3NlLmpzIiwid2VicGFjazovL2hsc0RsLy4vbm9kZV9tb2R1bGVzL0B2aWRlb2pzL3Zocy11dGlscy9kaXN0L2RlY29kZS1iNjQtdG8tdWludDgtYXJyYXkuanMiLCJ3ZWJwYWNrOi8vaGxzRGwvLi9ub2RlX21vZHVsZXMvQHZpZGVvanMvdmhzLXV0aWxzL2Rpc3Qvc3RyZWFtLmpzIiwid2VicGFjazovL2hsc0RsLy4vbm9kZV9tb2R1bGVzL2dsb2JhbC93aW5kb3cuanMiLCJ3ZWJwYWNrOi8vaGxzRGwvLi9ub2RlX21vZHVsZXMvbTN1OC1wYXJzZXIvZGlzdC9tM3U4LXBhcnNlci5lcy5qcyIsIndlYnBhY2s6Ly9obHNEbC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9obHNEbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9obHNEbC93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vaGxzRGwvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vaGxzRGwvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2hsc0RsL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vaGxzRGwvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9obHNEbC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Il0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfZXh0ZW5kcyIsIk9iamVjdCIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsInRoaXMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIl9fcHJvdG9fXyIsIl9pbnRlcm9wRGVmYXVsdExlZ2FjeSIsImUiLCJ3aW5kb3dfX2RlZmF1bHQiLCJiNjRUZXh0IiwicyIsImRlY29kZWRTdHJpbmciLCJhdG9iIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiYXJyYXkiLCJVaW50OEFycmF5IiwiY2hhckNvZGVBdCIsIlN0cmVhbSIsImxpc3RlbmVycyIsIl9wcm90byIsIm9uIiwidHlwZSIsImxpc3RlbmVyIiwicHVzaCIsIm9mZiIsImluZGV4IiwiaW5kZXhPZiIsInNsaWNlIiwic3BsaWNlIiwidHJpZ2dlciIsImNhbGxiYWNrcyIsImFyZ3MiLCJBcnJheSIsIl9sZW5ndGgiLCJfaSIsImRpc3Bvc2UiLCJwaXBlIiwiZGVzdGluYXRpb24iLCJkYXRhIiwid2luIiwid2luZG93IiwiZyIsIkxpbmVTdHJlYW0iLCJfU3RyZWFtIiwiX3RoaXMiLCJidWZmZXIiLCJuZXh0TmV3bGluZSIsInN1YnN0cmluZyIsInBhcnNlQXR0cmlidXRlcyIsImF0dHJpYnV0ZXMiLCJhdHRyIiwiYXR0cnMiLCJzcGxpdCIsIlJlZ0V4cCIsInJlc3VsdCIsImV4ZWMiLCJyZXBsYWNlIiwiUGFyc2VTdHJlYW0iLCJjdXN0b21QYXJzZXJzIiwidGFnTWFwcGVycyIsImxpbmUiLCJtYXRjaCIsImV2ZW50IiwiX3RoaXMyIiwidHJpbSIsInJlZHVjZSIsImFjYyIsIm1hcHBlciIsIm1hcHBlZExpbmUiLCJjb25jYXQiLCJmb3JFYWNoIiwibmV3TGluZSIsInRhZ1R5cGUiLCJkdXJhdGlvbiIsInBhcnNlRmxvYXQiLCJ0aXRsZSIsInBhcnNlSW50IiwidmVyc2lvbiIsIm51bWJlciIsInBsYXlsaXN0VHlwZSIsIm9mZnNldCIsImFsbG93ZWQiLCJ0ZXN0IiwiVVJJIiwidXJpIiwiQllURVJBTkdFIiwiX2F0dHJpYnV0ZXMkQllURVJBTkdFIiwiYnl0ZXJhbmdlIiwiUkVTT0xVVElPTiIsInJlc29sdXRpb24iLCJ3aWR0aCIsImhlaWdodCIsIkJBTkRXSURUSCIsImRhdGVUaW1lU3RyaW5nIiwiZGF0ZVRpbWVPYmplY3QiLCJEYXRlIiwiSVYiLCJ0b0xvd2VyQ2FzZSIsIlVpbnQzMkFycmF5IiwiUFJFQ0lTRSIsInRleHQiLCJhZGRQYXJzZXIiLCJfcmVmIiwiX3RoaXMzIiwiZXhwcmVzc2lvbiIsImN1c3RvbVR5cGUiLCJkYXRhUGFyc2VyIiwic2VnbWVudCIsImFkZFRhZ01hcHBlciIsIl9yZWYyIiwibWFwIiwiUGFyc2VyIiwibGluZVN0cmVhbSIsInBhcnNlU3RyZWFtIiwiY3VycmVudE1hcCIsIl9rZXkiLCJ1cmlzIiwiY3VycmVudFVyaSIsIm5vb3AiLCJkZWZhdWx0TWVkaWFHcm91cHMiLCJjdXJyZW50VGltZWxpbmUiLCJtYW5pZmVzdCIsImFsbG93Q2FjaGUiLCJkaXNjb250aW51aXR5U3RhcnRzIiwic2VnbWVudHMiLCJsYXN0Qnl0ZXJhbmdlRW5kIiwiZW50cnkiLCJtZWRpYUdyb3VwIiwicmVuZGl0aW9uIiwidGFnIiwibWVzc2FnZSIsImVuZGxpc3QiLCJlbmRMaXN0IiwiaW5mIiwibWVkaWFTZXF1ZW5jZSIsImRpc2NvbnRpbnVpdHlTZXF1ZW5jZSIsIk1FVEhPRCIsIktFWUZPUk1BVCIsIktFWUlEIiwiY29udGVudFByb3RlY3Rpb24iLCJzY2hlbWVJZFVyaSIsImtleUlkIiwicHNzaCIsIm1ldGhvZCIsIml2IiwiaXNGaW5pdGUiLCJwbGF5bGlzdCIsInBsYXlsaXN0cyIsIm1lZGlhR3JvdXBzIiwibWVkaWEiLCJUWVBFIiwiTkFNRSIsIm1lZGlhR3JvdXBUeXBlIiwiZGVmYXVsdCIsIkRFRkFVTFQiLCJhdXRvc2VsZWN0IiwiQVVUT1NFTEVDVCIsIkxBTkdVQUdFIiwibGFuZ3VhZ2UiLCJpbnN0cmVhbUlkIiwiQ0hBUkFDVEVSSVNUSUNTIiwiY2hhcmFjdGVyaXN0aWNzIiwiRk9SQ0VEIiwiZm9yY2VkIiwiZGlzY29udGludWl0eSIsInRhcmdldGR1cmF0aW9uIiwidGFyZ2V0RHVyYXRpb24iLCJ0b3RhbGR1cmF0aW9uIiwidG90YWxEdXJhdGlvbiIsInN0YXJ0IiwiaXNOYU4iLCJ0aW1lT2Zmc2V0IiwicHJlY2lzZSIsImN1ZU91dCIsImN1ZU91dENvbnQiLCJjdWVJbiIsInRpbWVsaW5lIiwiY29tbWVudCIsImN1c3RvbSIsImNodW5rIiwiZW5kIiwib3B0aW9ucyIsImRvd25sb2FkIiwidXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsIkVycm9yIiwic3RhdHVzVGV4dCIsIm0zdTgiLCJwYXJzZWQiLCJwYXJzZXIiLCJwYXJzZU0zVTgiLCJ1cmxzIiwicHJvbWlzZXMiLCJoZWFkZXJzIiwiZ2V0IiwiYXJyYXlCdWZmZXIiLCJQcm9taXNlIiwiYWxsIiwiQmxvYiIsImRvd25sb2FkVG9GaWxlIiwiZmlsZW5hbWUiLCJibG9iIiwiVVJMIiwid2Via2l0VVJMIiwidSIsImNyZWF0ZU9iamVjdFVSTCIsImEiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJocmVmIiwiYm9keSIsImFwcGVuZENoaWxkIiwiY2xpY2siLCJyZXZva2VPYmplY3RVUkwiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJvYmoiLCJwcm9wIiwi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TUFBTyxXQUU3RDVQLE9BQU9tUCxlQUFldlAsRUFBUyxhQUFjLENBQUVnUSxPQUFPLEtMRmhEbEIsRUFBb0IsTSIsImZpbGUiOiJobHMtZGwudmFyLmRldi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZDsiLCJmdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2V4dGVuZHM7IiwiZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gIHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzO1xuICBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pbmhlcml0c0xvb3NlOyIsIi8qISBAbmFtZSBAdmlkZW9qcy92aHMtdXRpbHMgQHZlcnNpb24gMi4yLjEgQGxpY2Vuc2UgTUlUICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB3aW5kb3cgPSByZXF1aXJlKCdnbG9iYWwvd2luZG93Jyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wRGVmYXVsdExlZ2FjeSAoZSkgeyByZXR1cm4gZSAmJiB0eXBlb2YgZSA9PT0gJ29iamVjdCcgJiYgJ2RlZmF1bHQnIGluIGUgPyBlIDogeyAnZGVmYXVsdCc6IGUgfTsgfVxuXG52YXIgd2luZG93X19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdExlZ2FjeSh3aW5kb3cpO1xuXG52YXIgYXRvYiA9IGZ1bmN0aW9uIGF0b2Iocykge1xuICByZXR1cm4gd2luZG93X19kZWZhdWx0WydkZWZhdWx0J10uYXRvYiA/IHdpbmRvd19fZGVmYXVsdFsnZGVmYXVsdCddLmF0b2IocykgOiBCdWZmZXIuZnJvbShzLCAnYmFzZTY0JykudG9TdHJpbmcoJ2JpbmFyeScpO1xufTtcblxuZnVuY3Rpb24gZGVjb2RlQjY0VG9VaW50OEFycmF5KGI2NFRleHQpIHtcbiAgdmFyIGRlY29kZWRTdHJpbmcgPSBhdG9iKGI2NFRleHQpO1xuICB2YXIgYXJyYXkgPSBuZXcgVWludDhBcnJheShkZWNvZGVkU3RyaW5nLmxlbmd0aCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWNvZGVkU3RyaW5nLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJyYXlbaV0gPSBkZWNvZGVkU3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gIH1cblxuICByZXR1cm4gYXJyYXk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVjb2RlQjY0VG9VaW50OEFycmF5O1xuIiwiLyohIEBuYW1lIEB2aWRlb2pzL3Zocy11dGlscyBAdmVyc2lvbiAyLjIuMSBAbGljZW5zZSBNSVQgKi9cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAZmlsZSBzdHJlYW0uanNcbiAqL1xuXG4vKipcbiAqIEEgbGlnaHR3ZWlnaHQgcmVhZGFibGUgc3RyZWFtIGltcGxlbWVudGlvbiB0aGF0IGhhbmRsZXMgZXZlbnQgZGlzcGF0Y2hpbmcuXG4gKlxuICogQGNsYXNzIFN0cmVhbVxuICovXG52YXIgU3RyZWFtID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3RyZWFtKCkge1xuICAgIHRoaXMubGlzdGVuZXJzID0ge307XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIHNwZWNpZmllZCBldmVudCB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSB0aGUgZXZlbnQgbmFtZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciB0aGUgY2FsbGJhY2sgdG8gYmUgaW52b2tlZCB3aGVuIGFuIGV2ZW50IG9mXG4gICAqIHRoZSBzcGVjaWZpZWQgdHlwZSBvY2N1cnNcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gU3RyZWFtLnByb3RvdHlwZTtcblxuICBfcHJvdG8ub24gPSBmdW5jdGlvbiBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnNbdHlwZV0pIHtcbiAgICAgIHRoaXMubGlzdGVuZXJzW3R5cGVdID0gW107XG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGxpc3RlbmVyIGZvciBhIHNwZWNpZmllZCBldmVudCB0eXBlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSB0aGUgZXZlbnQgbmFtZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciAgYSBmdW5jdGlvbiBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgZm9yIHRoaXNcbiAgICogdHlwZSBvZiBldmVudCB0aHJvdWdoIGBvbmBcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gaWYgd2UgY291bGQgdHVybiBpdCBvZmYgb3Igbm90XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm9mZiA9IGZ1bmN0aW9uIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnNbdHlwZV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgaW5kZXggPSB0aGlzLmxpc3RlbmVyc1t0eXBlXS5pbmRleE9mKGxpc3RlbmVyKTsgLy8gVE9ETzogd2hpY2ggaXMgYmV0dGVyP1xuICAgIC8vIEluIFZpZGVvLmpzIHdlIHNsaWNlIGxpc3RlbmVyIGZ1bmN0aW9uc1xuICAgIC8vIG9uIHRyaWdnZXIgc28gdGhhdCBpdCBkb2VzIG5vdCBtZXNzIHVwIHRoZSBvcmRlclxuICAgIC8vIHdoaWxlIHdlIGxvb3AgdGhyb3VnaC5cbiAgICAvL1xuICAgIC8vIEhlcmUgd2Ugc2xpY2Ugb24gb2ZmIHNvIHRoYXQgdGhlIGxvb3AgaW4gdHJpZ2dlclxuICAgIC8vIGNhbiBjb250aW51ZSB1c2luZyBpdCdzIG9sZCByZWZlcmVuY2UgdG8gbG9vcCB3aXRob3V0XG4gICAgLy8gbWVzc2luZyB1cCB0aGUgb3JkZXIuXG5cbiAgICB0aGlzLmxpc3RlbmVyc1t0eXBlXSA9IHRoaXMubGlzdGVuZXJzW3R5cGVdLnNsaWNlKDApO1xuICAgIHRoaXMubGlzdGVuZXJzW3R5cGVdLnNwbGljZShpbmRleCwgMSk7XG4gICAgcmV0dXJuIGluZGV4ID4gLTE7XG4gIH1cbiAgLyoqXG4gICAqIFRyaWdnZXIgYW4gZXZlbnQgb2YgdGhlIHNwZWNpZmllZCB0eXBlIG9uIHRoaXMgc3RyZWFtLiBBbnkgYWRkaXRpb25hbFxuICAgKiBhcmd1bWVudHMgdG8gdGhpcyBmdW5jdGlvbiBhcmUgcGFzc2VkIGFzIHBhcmFtZXRlcnMgdG8gZXZlbnQgbGlzdGVuZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSB0aGUgZXZlbnQgbmFtZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50cmlnZ2VyID0gZnVuY3Rpb24gdHJpZ2dlcih0eXBlKSB7XG4gICAgdmFyIGNhbGxiYWNrcyA9IHRoaXMubGlzdGVuZXJzW3R5cGVdO1xuXG4gICAgaWYgKCFjYWxsYmFja3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIFNsaWNpbmcgdGhlIGFyZ3VtZW50cyBvbiBldmVyeSBpbnZvY2F0aW9uIG9mIHRoaXMgbWV0aG9kXG4gICAgLy8gY2FuIGFkZCBhIHNpZ25pZmljYW50IGFtb3VudCBvZiBvdmVyaGVhZC4gQXZvaWQgdGhlXG4gICAgLy8gaW50ZXJtZWRpYXRlIG9iamVjdCBjcmVhdGlvbiBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGFcbiAgICAvLyBzaW5nbGUgY2FsbGJhY2sgYXJndW1lbnRcblxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICAgIHZhciBsZW5ndGggPSBjYWxsYmFja3MubGVuZ3RoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIHZhciBfbGVuZ3RoID0gY2FsbGJhY2tzLmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IF9sZW5ndGg7ICsrX2kpIHtcbiAgICAgICAgY2FsbGJhY2tzW19pXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIERlc3Ryb3lzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcbiAgfVxuICAvKipcbiAgICogRm9yd2FyZHMgYWxsIGBkYXRhYCBldmVudHMgb24gdGhpcyBzdHJlYW0gdG8gdGhlIGRlc3RpbmF0aW9uIHN0cmVhbS4gVGhlXG4gICAqIGRlc3RpbmF0aW9uIHN0cmVhbSBzaG91bGQgcHJvdmlkZSBhIG1ldGhvZCBgcHVzaGAgdG8gcmVjZWl2ZSB0aGUgZGF0YVxuICAgKiBldmVudHMgYXMgdGhleSBhcnJpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyZWFtfSBkZXN0aW5hdGlvbiB0aGUgc3RyZWFtIHRoYXQgd2lsbCByZWNlaXZlIGFsbCBgZGF0YWAgZXZlbnRzXG4gICAqIEBzZWUgaHR0cDovL25vZGVqcy5vcmcvYXBpL3N0cmVhbS5odG1sI3N0cmVhbV9yZWFkYWJsZV9waXBlX2Rlc3RpbmF0aW9uX29wdGlvbnNcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGlwZSA9IGZ1bmN0aW9uIHBpcGUoZGVzdGluYXRpb24pIHtcbiAgICB0aGlzLm9uKCdkYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGRlc3RpbmF0aW9uLnB1c2goZGF0YSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIFN0cmVhbTtcbn0oKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdHJlYW07XG4iLCJ2YXIgd2luO1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbiA9IHdpbmRvdztcbn0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbiA9IGdsb2JhbDtcbn0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpe1xuICAgIHdpbiA9IHNlbGY7XG59IGVsc2Uge1xuICAgIHdpbiA9IHt9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHdpbjtcbiIsIi8qISBAbmFtZSBtM3U4LXBhcnNlciBAdmVyc2lvbiA0LjUuMCBAbGljZW5zZSBBcGFjaGUtMi4wICovXG5pbXBvcnQgX2luaGVyaXRzTG9vc2UgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbmhlcml0c0xvb3NlJztcbmltcG9ydCBTdHJlYW0gZnJvbSAnQHZpZGVvanMvdmhzLXV0aWxzL2Rpc3Qvc3RyZWFtLmpzJztcbmltcG9ydCBfZXh0ZW5kcyBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQnO1xuaW1wb3J0IGRlY29kZUI2NFRvVWludDhBcnJheSBmcm9tICdAdmlkZW9qcy92aHMtdXRpbHMvZGlzdC9kZWNvZGUtYjY0LXRvLXVpbnQ4LWFycmF5LmpzJztcblxuLyoqXG4gKiBBIHN0cmVhbSB0aGF0IGJ1ZmZlcnMgc3RyaW5nIGlucHV0IGFuZCBnZW5lcmF0ZXMgYSBgZGF0YWAgZXZlbnQgZm9yIGVhY2hcbiAqIGxpbmUuXG4gKlxuICogQGNsYXNzIExpbmVTdHJlYW1cbiAqIEBleHRlbmRzIFN0cmVhbVxuICovXG5cbnZhciBMaW5lU3RyZWFtID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfU3RyZWFtKSB7XG4gIF9pbmhlcml0c0xvb3NlKExpbmVTdHJlYW0sIF9TdHJlYW0pO1xuXG4gIGZ1bmN0aW9uIExpbmVTdHJlYW0oKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfU3RyZWFtLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBfdGhpcy5idWZmZXIgPSAnJztcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBuZXcgZGF0YSB0byBiZSBwYXJzZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhIHRoZSB0ZXh0IHRvIHByb2Nlc3NcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gTGluZVN0cmVhbS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnB1c2ggPSBmdW5jdGlvbiBwdXNoKGRhdGEpIHtcbiAgICB2YXIgbmV4dE5ld2xpbmU7XG4gICAgdGhpcy5idWZmZXIgKz0gZGF0YTtcbiAgICBuZXh0TmV3bGluZSA9IHRoaXMuYnVmZmVyLmluZGV4T2YoJ1xcbicpO1xuXG4gICAgZm9yICg7IG5leHROZXdsaW5lID4gLTE7IG5leHROZXdsaW5lID0gdGhpcy5idWZmZXIuaW5kZXhPZignXFxuJykpIHtcbiAgICAgIHRoaXMudHJpZ2dlcignZGF0YScsIHRoaXMuYnVmZmVyLnN1YnN0cmluZygwLCBuZXh0TmV3bGluZSkpO1xuICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zdWJzdHJpbmcobmV4dE5ld2xpbmUgKyAxKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIExpbmVTdHJlYW07XG59KFN0cmVhbSk7XG5cbi8qKlxuICogXCJmb3JnaXZpbmdcIiBhdHRyaWJ1dGUgbGlzdCBwc3VlZG8tZ3JhbW1hcjpcbiAqIGF0dHJpYnV0ZXMgLT4ga2V5dmFsdWUgKCcsJyBrZXl2YWx1ZSkqXG4gKiBrZXl2YWx1ZSAgIC0+IGtleSAnPScgdmFsdWVcbiAqIGtleSAgICAgICAgLT4gW149XSpcbiAqIHZhbHVlICAgICAgLT4gJ1wiJyBbXlwiXSogJ1wiJyB8IFteLF0qXG4gKi9cblxudmFyIGF0dHJpYnV0ZVNlcGFyYXRvciA9IGZ1bmN0aW9uIGF0dHJpYnV0ZVNlcGFyYXRvcigpIHtcbiAgdmFyIGtleSA9ICdbXj1dKic7XG4gIHZhciB2YWx1ZSA9ICdcIlteXCJdKlwifFteLF0qJztcbiAgdmFyIGtleXZhbHVlID0gJyg/OicgKyBrZXkgKyAnKT0oPzonICsgdmFsdWUgKyAnKSc7XG4gIHJldHVybiBuZXcgUmVnRXhwKCcoPzpefCwpKCcgKyBrZXl2YWx1ZSArICcpJyk7XG59O1xuLyoqXG4gKiBQYXJzZSBhdHRyaWJ1dGVzIGZyb20gYSBsaW5lIGdpdmVuIHRoZSBzZXBhcmF0b3JcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlcyB0aGUgYXR0cmlidXRlIGxpbmUgdG8gcGFyc2VcbiAqL1xuXG5cbnZhciBwYXJzZUF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBwYXJzZUF0dHJpYnV0ZXMoYXR0cmlidXRlcykge1xuICAvLyBzcGxpdCB0aGUgc3RyaW5nIHVzaW5nIGF0dHJpYnV0ZXMgYXMgdGhlIHNlcGFyYXRvclxuICB2YXIgYXR0cnMgPSBhdHRyaWJ1dGVzLnNwbGl0KGF0dHJpYnV0ZVNlcGFyYXRvcigpKTtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgdmFyIGF0dHI7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIC8vIGZpbHRlciBvdXQgdW5tYXRjaGVkIHBvcnRpb25zIG9mIHRoZSBzdHJpbmdcbiAgICBpZiAoYXR0cnNbaV0gPT09ICcnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9IC8vIHNwbGl0IHRoZSBrZXkgYW5kIHZhbHVlXG5cblxuICAgIGF0dHIgPSAvKFtePV0qKT0oLiopLy5leGVjKGF0dHJzW2ldKS5zbGljZSgxKTsgLy8gdHJpbSB3aGl0ZXNwYWNlIGFuZCByZW1vdmUgb3B0aW9uYWwgcXVvdGVzIGFyb3VuZCB0aGUgdmFsdWVcblxuICAgIGF0dHJbMF0gPSBhdHRyWzBdLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbiAgICBhdHRyWzFdID0gYXR0clsxXS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgYXR0clsxXSA9IGF0dHJbMV0ucmVwbGFjZSgvXlsnXCJdKC4qKVsnXCJdJC9nLCAnJDEnKTtcbiAgICByZXN1bHRbYXR0clswXV0gPSBhdHRyWzFdO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4vKipcbiAqIEEgbGluZS1sZXZlbCBNM1U4IHBhcnNlciBldmVudCBzdHJlYW0uIEl0IGV4cGVjdHMgdG8gcmVjZWl2ZSBpbnB1dCBvbmVcbiAqIGxpbmUgYXQgYSB0aW1lIGFuZCBwZXJmb3JtcyBhIGNvbnRleHQtZnJlZSBwYXJzZSBvZiBpdHMgY29udGVudHMuIEEgc3RyZWFtXG4gKiBpbnRlcnByZXRhdGlvbiBvZiBhIG1hbmlmZXN0IGNhbiBiZSB1c2VmdWwgaWYgdGhlIG1hbmlmZXN0IGlzIGV4cGVjdGVkIHRvXG4gKiBiZSB0b28gbGFyZ2UgdG8gZml0IGNvbWZvcnRhYmx5IGludG8gbWVtb3J5IG9yIHRoZSBlbnRpcmV0eSBvZiB0aGUgaW5wdXRcbiAqIGlzIG5vdCBpbW1lZGlhdGVseSBhdmFpbGFibGUuIE90aGVyd2lzZSwgaXQncyBwcm9iYWJseSBtdWNoIGVhc2llciB0byB3b3JrXG4gKiB3aXRoIGEgcmVndWxhciBgUGFyc2VyYCBvYmplY3QuXG4gKlxuICogUHJvZHVjZXMgYGRhdGFgIGV2ZW50cyB3aXRoIGFuIG9iamVjdCB0aGF0IGNhcHR1cmVzIHRoZSBwYXJzZXInc1xuICogaW50ZXJwcmV0YXRpb24gb2YgdGhlIGlucHV0LiBUaGF0IG9iamVjdCBoYXMgYSBwcm9wZXJ0eSBgdGFnYCB0aGF0IGlzIG9uZVxuICogb2YgYHVyaWAsIGBjb21tZW50YCwgb3IgYHRhZ2AuIFVSSXMgb25seSBoYXZlIGEgc2luZ2xlIGFkZGl0aW9uYWxcbiAqIHByb3BlcnR5LCBgbGluZWAsIHdoaWNoIGNhcHR1cmVzIHRoZSBlbnRpcmV0eSBvZiB0aGUgaW5wdXQgd2l0aG91dFxuICogaW50ZXJwcmV0YXRpb24uIENvbW1lbnRzIHNpbWlsYXJseSBoYXZlIGEgc2luZ2xlIGFkZGl0aW9uYWwgcHJvcGVydHlcbiAqIGB0ZXh0YCB3aGljaCBpcyB0aGUgaW5wdXQgd2l0aG91dCB0aGUgbGVhZGluZyBgI2AuXG4gKlxuICogVGFncyBhbHdheXMgaGF2ZSBhIHByb3BlcnR5IGB0YWdUeXBlYCB3aGljaCBpcyB0aGUgbG93ZXItY2FzZWQgdmVyc2lvbiBvZlxuICogdGhlIE0zVTggZGlyZWN0aXZlIHdpdGhvdXQgdGhlIGAjRVhUYCBvciBgI0VYVC1YLWAgcHJlZml4LiBGb3IgaW5zdGFuY2UsXG4gKiBgI0VYVC1YLU1FRElBLVNFUVVFTkNFYCBiZWNvbWVzIGBtZWRpYS1zZXF1ZW5jZWAgd2hlbiBwYXJzZWQuIFVucmVjb2duaXplZFxuICogdGFncyBhcmUgZ2l2ZW4gdGhlIHRhZyB0eXBlIGB1bmtub3duYCBhbmQgYSBzaW5nbGUgYWRkaXRpb25hbCBwcm9wZXJ0eVxuICogYGRhdGFgIHdpdGggdGhlIHJlbWFpbmRlciBvZiB0aGUgaW5wdXQuXG4gKlxuICogQGNsYXNzIFBhcnNlU3RyZWFtXG4gKiBAZXh0ZW5kcyBTdHJlYW1cbiAqL1xuXG5cbnZhciBQYXJzZVN0cmVhbSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1N0cmVhbSkge1xuICBfaW5oZXJpdHNMb29zZShQYXJzZVN0cmVhbSwgX1N0cmVhbSk7XG5cbiAgZnVuY3Rpb24gUGFyc2VTdHJlYW0oKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX3RoaXMgPSBfU3RyZWFtLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICBfdGhpcy5jdXN0b21QYXJzZXJzID0gW107XG4gICAgX3RoaXMudGFnTWFwcGVycyA9IFtdO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogUGFyc2VzIGFuIGFkZGl0aW9uYWwgbGluZSBvZiBpbnB1dC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxpbmUgYSBzaW5nbGUgbGluZSBvZiBhbiBNM1U4IGZpbGUgdG8gcGFyc2VcbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gUGFyc2VTdHJlYW0ucHJvdG90eXBlO1xuXG4gIF9wcm90by5wdXNoID0gZnVuY3Rpb24gcHVzaChsaW5lKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgbWF0Y2g7XG4gICAgdmFyIGV2ZW50OyAvLyBzdHJpcCB3aGl0ZXNwYWNlXG5cbiAgICBsaW5lID0gbGluZS50cmltKCk7XG5cbiAgICBpZiAobGluZS5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIGlnbm9yZSBlbXB0eSBsaW5lc1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gVVJJc1xuXG5cbiAgICBpZiAobGluZVswXSAhPT0gJyMnKSB7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2RhdGEnLCB7XG4gICAgICAgIHR5cGU6ICd1cmknLFxuICAgICAgICB1cmk6IGxpbmVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gbWFwIHRhZ3NcblxuXG4gICAgdmFyIG5ld0xpbmVzID0gdGhpcy50YWdNYXBwZXJzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBtYXBwZXIpIHtcbiAgICAgIHZhciBtYXBwZWRMaW5lID0gbWFwcGVyKGxpbmUpOyAvLyBza2lwIGlmIHVuY2hhbmdlZFxuXG4gICAgICBpZiAobWFwcGVkTGluZSA9PT0gbGluZSkge1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChbbWFwcGVkTGluZV0pO1xuICAgIH0sIFtsaW5lXSk7XG4gICAgbmV3TGluZXMuZm9yRWFjaChmdW5jdGlvbiAobmV3TGluZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpczIuY3VzdG9tUGFyc2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoX3RoaXMyLmN1c3RvbVBhcnNlcnNbaV0uY2FsbChfdGhpczIsIG5ld0xpbmUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9IC8vIENvbW1lbnRzXG5cblxuICAgICAgaWYgKG5ld0xpbmUuaW5kZXhPZignI0VYVCcpICE9PSAwKSB7XG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdkYXRhJywge1xuICAgICAgICAgIHR5cGU6ICdjb21tZW50JyxcbiAgICAgICAgICB0ZXh0OiBuZXdMaW5lLnNsaWNlKDEpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gc3RyaXAgb2ZmIGFueSBjYXJyaWFnZSByZXR1cm5zIGhlcmUgc28gdGhlIHJlZ2V4IG1hdGNoaW5nXG4gICAgICAvLyBkb2Vzbid0IGhhdmUgdG8gYWNjb3VudCBmb3IgdGhlbS5cblxuXG4gICAgICBuZXdMaW5lID0gbmV3TGluZS5yZXBsYWNlKCdcXHInLCAnJyk7IC8vIFRhZ3NcblxuICAgICAgbWF0Y2ggPSAvXiNFWFRNM1UvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnbTN1J1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhUSU5GOj8oWzAtOVxcLl0qKT8sPyguKik/JC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdpbmYnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuZHVyYXRpb24gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtYXRjaFsyXSkge1xuICAgICAgICAgIGV2ZW50LnRpdGxlID0gbWF0Y2hbMl07XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtVEFSR0VURFVSQVRJT046PyhbMC05Ll0qKT8vLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAndGFyZ2V0ZHVyYXRpb24nXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuZHVyYXRpb24gPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI1pFTi1UT1RBTC1EVVJBVElPTjo/KFswLTkuXSopPy8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICd0b3RhbGR1cmF0aW9uJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmR1cmF0aW9uID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1WRVJTSU9OOj8oWzAtOS5dKik/Ly5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3ZlcnNpb24nXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQudmVyc2lvbiA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtTUVESUEtU0VRVUVOQ0U6PyhcXC0/WzAtOS5dKik/Ly5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ21lZGlhLXNlcXVlbmNlJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50Lm51bWJlciA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtRElTQ09OVElOVUlUWS1TRVFVRU5DRTo/KFxcLT9bMC05Ll0qKT8vLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnZGlzY29udGludWl0eS1zZXF1ZW5jZSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5udW1iZXIgPSBwYXJzZUludChtYXRjaFsxXSwgMTApO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVBMQVlMSVNULVRZUEU6PyguKik/JC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdwbGF5bGlzdC10eXBlJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LnBsYXlsaXN0VHlwZSA9IG1hdGNoWzFdO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUJZVEVSQU5HRTo/KFswLTkuXSopP0A/KFswLTkuXSopPy8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdieXRlcmFuZ2UnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQubGVuZ3RoID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtYXRjaFsyXSkge1xuICAgICAgICAgIGV2ZW50Lm9mZnNldCA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtQUxMT1ctQ0FDSEU6PyhZRVN8Tk8pPy8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdhbGxvdy1jYWNoZSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5hbGxvd2VkID0gIS9OTy8udGVzdChtYXRjaFsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtTUFQOj8oLiopJC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdtYXAnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuXG4gICAgICAgICAgaWYgKGF0dHJpYnV0ZXMuVVJJKSB7XG4gICAgICAgICAgICBldmVudC51cmkgPSBhdHRyaWJ1dGVzLlVSSTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYXR0cmlidXRlcy5CWVRFUkFOR0UpIHtcbiAgICAgICAgICAgIHZhciBfYXR0cmlidXRlcyRCWVRFUkFOR0UgPSBhdHRyaWJ1dGVzLkJZVEVSQU5HRS5zcGxpdCgnQCcpLFxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IF9hdHRyaWJ1dGVzJEJZVEVSQU5HRVswXSxcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBfYXR0cmlidXRlcyRCWVRFUkFOR0VbMV07XG5cbiAgICAgICAgICAgIGV2ZW50LmJ5dGVyYW5nZSA9IHt9O1xuXG4gICAgICAgICAgICBpZiAobGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGV2ZW50LmJ5dGVyYW5nZS5sZW5ndGggPSBwYXJzZUludChsZW5ndGgsIDEwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9mZnNldCkge1xuICAgICAgICAgICAgICBldmVudC5ieXRlcmFuZ2Uub2Zmc2V0ID0gcGFyc2VJbnQob2Zmc2V0LCAxMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVNUUkVBTS1JTkY6PyguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3N0cmVhbS1pbmYnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuYXR0cmlidXRlcyA9IHBhcnNlQXR0cmlidXRlcyhtYXRjaFsxXSk7XG5cbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5SRVNPTFVUSU9OKSB7XG4gICAgICAgICAgICB2YXIgc3BsaXQgPSBldmVudC5hdHRyaWJ1dGVzLlJFU09MVVRJT04uc3BsaXQoJ3gnKTtcbiAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0ge307XG5cbiAgICAgICAgICAgIGlmIChzcGxpdFswXSkge1xuICAgICAgICAgICAgICByZXNvbHV0aW9uLndpZHRoID0gcGFyc2VJbnQoc3BsaXRbMF0sIDEwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNwbGl0WzFdKSB7XG4gICAgICAgICAgICAgIHJlc29sdXRpb24uaGVpZ2h0ID0gcGFyc2VJbnQoc3BsaXRbMV0sIDEwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5SRVNPTFVUSU9OID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlcy5CQU5EV0lEVEgpIHtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuQkFORFdJRFRIID0gcGFyc2VJbnQoZXZlbnQuYXR0cmlidXRlcy5CQU5EV0lEVEgsIDEwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXZlbnQuYXR0cmlidXRlc1snUFJPR1JBTS1JRCddKSB7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzWydQUk9HUkFNLUlEJ10gPSBwYXJzZUludChldmVudC5hdHRyaWJ1dGVzWydQUk9HUkFNLUlEJ10sIDEwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtTUVESUE6PyguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ21lZGlhJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUVORExJU1QvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnZW5kbGlzdCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLURJU0NPTlRJTlVJVFkvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnZGlzY29udGludWl0eSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLVBST0dSQU0tREFURS1USU1FOj8oLiopJC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdwcm9ncmFtLWRhdGUtdGltZSdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5kYXRlVGltZVN0cmluZyA9IG1hdGNoWzFdO1xuICAgICAgICAgIGV2ZW50LmRhdGVUaW1lT2JqZWN0ID0gbmV3IERhdGUobWF0Y2hbMV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUtFWTo/KC4qKSQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAna2V5J1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pOyAvLyBwYXJzZSB0aGUgSVYgc3RyaW5nIGludG8gYSBVaW50MzJBcnJheVxuXG4gICAgICAgICAgaWYgKGV2ZW50LmF0dHJpYnV0ZXMuSVYpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5hdHRyaWJ1dGVzLklWLnN1YnN0cmluZygwLCAyKS50b0xvd2VyQ2FzZSgpID09PSAnMHgnKSB7XG4gICAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuSVYgPSBldmVudC5hdHRyaWJ1dGVzLklWLnN1YnN0cmluZygyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5JViA9IGV2ZW50LmF0dHJpYnV0ZXMuSVYubWF0Y2goLy57OH0vZyk7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLklWWzBdID0gcGFyc2VJbnQoZXZlbnQuYXR0cmlidXRlcy5JVlswXSwgMTYpO1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5JVlsxXSA9IHBhcnNlSW50KGV2ZW50LmF0dHJpYnV0ZXMuSVZbMV0sIDE2KTtcbiAgICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuSVZbMl0gPSBwYXJzZUludChldmVudC5hdHRyaWJ1dGVzLklWWzJdLCAxNik7XG4gICAgICAgICAgICBldmVudC5hdHRyaWJ1dGVzLklWWzNdID0gcGFyc2VJbnQoZXZlbnQuYXR0cmlidXRlcy5JVlszXSwgMTYpO1xuICAgICAgICAgICAgZXZlbnQuYXR0cmlidXRlcy5JViA9IG5ldyBVaW50MzJBcnJheShldmVudC5hdHRyaWJ1dGVzLklWKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIudHJpZ2dlcignZGF0YScsIGV2ZW50KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG1hdGNoID0gL14jRVhULVgtU1RBUlQ6PyguKikkLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ3N0YXJ0J1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMgPSBwYXJzZUF0dHJpYnV0ZXMobWF0Y2hbMV0pO1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXNbJ1RJTUUtT0ZGU0VUJ10gPSBwYXJzZUZsb2F0KGV2ZW50LmF0dHJpYnV0ZXNbJ1RJTUUtT0ZGU0VUJ10pO1xuICAgICAgICAgIGV2ZW50LmF0dHJpYnV0ZXMuUFJFQ0lTRSA9IC9ZRVMvLnRlc3QoZXZlbnQuYXR0cmlidXRlcy5QUkVDSVNFKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1DVUUtT1VULUNPTlQ6PyguKik/JC8uZXhlYyhuZXdMaW5lKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICAgIHRhZ1R5cGU6ICdjdWUtb3V0LWNvbnQnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgZXZlbnQuZGF0YSA9IG1hdGNoWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV2ZW50LmRhdGEgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi50cmlnZ2VyKCdkYXRhJywgZXZlbnQpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbWF0Y2ggPSAvXiNFWFQtWC1DVUUtT1VUOj8oLiopPyQvLmV4ZWMobmV3TGluZSk7XG5cbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICB0eXBlOiAndGFnJyxcbiAgICAgICAgICB0YWdUeXBlOiAnY3VlLW91dCdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5kYXRhID0gbWF0Y2hbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXZlbnQuZGF0YSA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBtYXRjaCA9IC9eI0VYVC1YLUNVRS1JTjo/KC4qKT8kLy5leGVjKG5ld0xpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdHlwZTogJ3RhZycsXG4gICAgICAgICAgdGFnVHlwZTogJ2N1ZS1pbidcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICBldmVudC5kYXRhID0gbWF0Y2hbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXZlbnQuZGF0YSA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCBldmVudCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyB1bmtub3duIHRhZyB0eXBlXG5cblxuICAgICAgX3RoaXMyLnRyaWdnZXIoJ2RhdGEnLCB7XG4gICAgICAgIHR5cGU6ICd0YWcnLFxuICAgICAgICBkYXRhOiBuZXdMaW5lLnNsaWNlKDQpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgcGFyc2VyIGZvciBjdXN0b20gaGVhZGVyc1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gICBvcHRpb25zICAgICAgICAgICAgICBhIG1hcCBvZiBvcHRpb25zIGZvciB0aGUgYWRkZWQgcGFyc2VyXG4gICAqIEBwYXJhbSB7UmVnRXhwfSAgIG9wdGlvbnMuZXhwcmVzc2lvbiAgIGEgcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIHRoZSBjdXN0b20gaGVhZGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgIG9wdGlvbnMuY3VzdG9tVHlwZSAgIHRoZSBjdXN0b20gdHlwZSB0byByZWdpc3RlciB0byB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmRhdGFQYXJzZXJdIGZ1bmN0aW9uIHRvIHBhcnNlIHRoZSBsaW5lIGludG8gYW4gb2JqZWN0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gIFtvcHRpb25zLnNlZ21lbnRdICAgIHNob3VsZCB0YWcgZGF0YSBiZSBhdHRhY2hlZCB0byB0aGUgc2VnbWVudCBvYmplY3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkUGFyc2VyID0gZnVuY3Rpb24gYWRkUGFyc2VyKF9yZWYpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBleHByZXNzaW9uID0gX3JlZi5leHByZXNzaW9uLFxuICAgICAgICBjdXN0b21UeXBlID0gX3JlZi5jdXN0b21UeXBlLFxuICAgICAgICBkYXRhUGFyc2VyID0gX3JlZi5kYXRhUGFyc2VyLFxuICAgICAgICBzZWdtZW50ID0gX3JlZi5zZWdtZW50O1xuXG4gICAgaWYgKHR5cGVvZiBkYXRhUGFyc2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBkYXRhUGFyc2VyID0gZnVuY3Rpb24gZGF0YVBhcnNlcihsaW5lKSB7XG4gICAgICAgIHJldHVybiBsaW5lO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLmN1c3RvbVBhcnNlcnMucHVzaChmdW5jdGlvbiAobGluZSkge1xuICAgICAgdmFyIG1hdGNoID0gZXhwcmVzc2lvbi5leGVjKGxpbmUpO1xuXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgX3RoaXMzLnRyaWdnZXIoJ2RhdGEnLCB7XG4gICAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4gICAgICAgICAgZGF0YTogZGF0YVBhcnNlcihsaW5lKSxcbiAgICAgICAgICBjdXN0b21UeXBlOiBjdXN0b21UeXBlLFxuICAgICAgICAgIHNlZ21lbnQ6IHNlZ21lbnRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIGN1c3RvbSBoZWFkZXIgbWFwcGVyXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAgIG9wdGlvbnNcbiAgICogQHBhcmFtIHtSZWdFeHB9ICAgb3B0aW9ucy5leHByZXNzaW9uICAgYSByZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggdGhlIGN1c3RvbSBoZWFkZXJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5tYXAgICAgICAgICAgZnVuY3Rpb24gdG8gdHJhbnNsYXRlIHRhZyBpbnRvIGEgZGlmZmVyZW50IHRhZ1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hZGRUYWdNYXBwZXIgPSBmdW5jdGlvbiBhZGRUYWdNYXBwZXIoX3JlZjIpIHtcbiAgICB2YXIgZXhwcmVzc2lvbiA9IF9yZWYyLmV4cHJlc3Npb24sXG4gICAgICAgIG1hcCA9IF9yZWYyLm1hcDtcblxuICAgIHZhciBtYXBGbiA9IGZ1bmN0aW9uIG1hcEZuKGxpbmUpIHtcbiAgICAgIGlmIChleHByZXNzaW9uLnRlc3QobGluZSkpIHtcbiAgICAgICAgcmV0dXJuIG1hcChsaW5lKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfTtcblxuICAgIHRoaXMudGFnTWFwcGVycy5wdXNoKG1hcEZuKTtcbiAgfTtcblxuICByZXR1cm4gUGFyc2VTdHJlYW07XG59KFN0cmVhbSk7XG5cbi8qKlxuICogQSBwYXJzZXIgZm9yIE0zVTggZmlsZXMuIFRoZSBjdXJyZW50IGludGVycHJldGF0aW9uIG9mIHRoZSBpbnB1dCBpc1xuICogZXhwb3NlZCBhcyBhIHByb3BlcnR5IGBtYW5pZmVzdGAgb24gcGFyc2VyIG9iamVjdHMuIEl0J3MganVzdCB0d28gbGluZXMgdG9cbiAqIGNyZWF0ZSBhbmQgcGFyc2UgYSBtYW5pZmVzdCBvbmNlIHlvdSBoYXZlIHRoZSBjb250ZW50cyBhdmFpbGFibGUgYXMgYSBzdHJpbmc6XG4gKlxuICogYGBganNcbiAqIHZhciBwYXJzZXIgPSBuZXcgbTN1OC5QYXJzZXIoKTtcbiAqIHBhcnNlci5wdXNoKHhoci5yZXNwb25zZVRleHQpO1xuICogYGBgXG4gKlxuICogTmV3IGlucHV0IGNhbiBsYXRlciBiZSBhcHBsaWVkIHRvIHVwZGF0ZSB0aGUgbWFuaWZlc3Qgb2JqZWN0IGJ5IGNhbGxpbmdcbiAqIGBwdXNoYCBhZ2Fpbi5cbiAqXG4gKiBUaGUgcGFyc2VyIGF0dGVtcHRzIHRvIGNyZWF0ZSBhIHVzYWJsZSBtYW5pZmVzdCBvYmplY3QgZXZlbiBpZiB0aGVcbiAqIHVuZGVybHlpbmcgaW5wdXQgaXMgc29tZXdoYXQgbm9uc2Vuc2ljYWwuIEl0IGVtaXRzIGBpbmZvYCBhbmQgYHdhcm5pbmdgXG4gKiBldmVudHMgZHVyaW5nIHRoZSBwYXJzZSBpZiBpdCBlbmNvdW50ZXJzIGlucHV0IHRoYXQgc2VlbXMgaW52YWxpZCBvclxuICogcmVxdWlyZXMgc29tZSBwcm9wZXJ0eSBvZiB0aGUgbWFuaWZlc3Qgb2JqZWN0IHRvIGJlIGRlZmF1bHRlZC5cbiAqXG4gKiBAY2xhc3MgUGFyc2VyXG4gKiBAZXh0ZW5kcyBTdHJlYW1cbiAqL1xuXG52YXIgUGFyc2VyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfU3RyZWFtKSB7XG4gIF9pbmhlcml0c0xvb3NlKFBhcnNlciwgX1N0cmVhbSk7XG5cbiAgZnVuY3Rpb24gUGFyc2VyKCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1N0cmVhbS5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgX3RoaXMubGluZVN0cmVhbSA9IG5ldyBMaW5lU3RyZWFtKCk7XG4gICAgX3RoaXMucGFyc2VTdHJlYW0gPSBuZXcgUGFyc2VTdHJlYW0oKTtcblxuICAgIF90aGlzLmxpbmVTdHJlYW0ucGlwZShfdGhpcy5wYXJzZVN0cmVhbSk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgY29uc2lzdGVudC10aGlzICovXG5cblxuICAgIHZhciBzZWxmID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBjb25zaXN0ZW50LXRoaXMgKi9cblxuXG4gICAgdmFyIHVyaXMgPSBbXTtcbiAgICB2YXIgY3VycmVudFVyaSA9IHt9OyAvLyBpZiBzcGVjaWZpZWQsIHRoZSBhY3RpdmUgRVhULVgtTUFQIGRlZmluaXRpb25cblxuICAgIHZhciBjdXJyZW50TWFwOyAvLyBpZiBzcGVjaWZpZWQsIHRoZSBhY3RpdmUgZGVjcnlwdGlvbiBrZXlcblxuICAgIHZhciBfa2V5O1xuXG4gICAgdmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307XG5cbiAgICB2YXIgZGVmYXVsdE1lZGlhR3JvdXBzID0ge1xuICAgICAgJ0FVRElPJzoge30sXG4gICAgICAnVklERU8nOiB7fSxcbiAgICAgICdDTE9TRUQtQ0FQVElPTlMnOiB7fSxcbiAgICAgICdTVUJUSVRMRVMnOiB7fVxuICAgIH07IC8vIFRoaXMgaXMgdGhlIFdpZGV2aW5lIFVVSUQgZnJvbSBEQVNIIElGIElPUC4gVGhlIHNhbWUgZXhhY3Qgc3RyaW5nIGlzXG4gICAgLy8gdXNlZCBpbiBNUERzIHdpdGggV2lkZXZpbmUgZW5jcnlwdGVkIHN0cmVhbXMuXG5cbiAgICB2YXIgd2lkZXZpbmVVdWlkID0gJ3Vybjp1dWlkOmVkZWY4YmE5LTc5ZDYtNGFjZS1hM2M4LTI3ZGNkNTFkMjFlZCc7IC8vIGdyb3VwIHNlZ21lbnRzIGludG8gbnVtYmVyZWQgdGltZWxpbmVzIGRlbGluZWF0ZWQgYnkgZGlzY29udGludWl0aWVzXG5cbiAgICB2YXIgY3VycmVudFRpbWVsaW5lID0gMDsgLy8gdGhlIG1hbmlmZXN0IGlzIGVtcHR5IHVudGlsIHRoZSBwYXJzZSBzdHJlYW0gYmVnaW5zIGRlbGl2ZXJpbmcgZGF0YVxuXG4gICAgX3RoaXMubWFuaWZlc3QgPSB7XG4gICAgICBhbGxvd0NhY2hlOiB0cnVlLFxuICAgICAgZGlzY29udGludWl0eVN0YXJ0czogW10sXG4gICAgICBzZWdtZW50czogW11cbiAgICB9OyAvLyBrZWVwIHRyYWNrIG9mIHRoZSBsYXN0IHNlZW4gc2VnbWVudCdzIGJ5dGUgcmFuZ2UgZW5kLCBhcyBzZWdtZW50cyBhcmUgbm90IHJlcXVpcmVkXG4gICAgLy8gdG8gcHJvdmlkZSB0aGUgb2Zmc2V0LCBpbiB3aGljaCBjYXNlIGl0IGRlZmF1bHRzIHRvIHRoZSBuZXh0IGJ5dGUgYWZ0ZXIgdGhlXG4gICAgLy8gcHJldmlvdXMgc2VnbWVudFxuXG4gICAgdmFyIGxhc3RCeXRlcmFuZ2VFbmQgPSAwOyAvLyB1cGRhdGUgdGhlIG1hbmlmZXN0IHdpdGggdGhlIG0zdTggZW50cnkgZnJvbSB0aGUgcGFyc2Ugc3RyZWFtXG5cbiAgICBfdGhpcy5wYXJzZVN0cmVhbS5vbignZGF0YScsIGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgdmFyIG1lZGlhR3JvdXA7XG4gICAgICB2YXIgcmVuZGl0aW9uO1xuICAgICAgKHtcbiAgICAgICAgdGFnOiBmdW5jdGlvbiB0YWcoKSB7XG4gICAgICAgICAgLy8gc3dpdGNoIGJhc2VkIG9uIHRoZSB0YWcgdHlwZVxuICAgICAgICAgICgoe1xuICAgICAgICAgICAgJ2FsbG93LWNhY2hlJzogZnVuY3Rpb24gYWxsb3dDYWNoZSgpIHtcbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5hbGxvd0NhY2hlID0gZW50cnkuYWxsb3dlZDtcblxuICAgICAgICAgICAgICBpZiAoISgnYWxsb3dlZCcgaW4gZW50cnkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdpbmZvJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2RlZmF1bHRpbmcgYWxsb3dDYWNoZSB0byBZRVMnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5hbGxvd0NhY2hlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ5dGVyYW5nZTogZnVuY3Rpb24gYnl0ZXJhbmdlKCkge1xuICAgICAgICAgICAgICB2YXIgYnl0ZXJhbmdlID0ge307XG5cbiAgICAgICAgICAgICAgaWYgKCdsZW5ndGgnIGluIGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFVyaS5ieXRlcmFuZ2UgPSBieXRlcmFuZ2U7XG4gICAgICAgICAgICAgICAgYnl0ZXJhbmdlLmxlbmd0aCA9IGVudHJ5Lmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGlmICghKCdvZmZzZXQnIGluIGVudHJ5KSkge1xuICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAqIEZyb20gdGhlIGxhdGVzdCBzcGVjIChhcyBvZiB0aGlzIHdyaXRpbmcpOlxuICAgICAgICAgICAgICAgICAgICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LXBhbnRvcy1odHRwLWxpdmUtc3RyZWFtaW5nLTIzI3NlY3Rpb24tNC4zLjIuMlxuICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAqIFNhbWUgdGV4dCBzaW5jZSBFWFQtWC1CWVRFUkFOR0UncyBpbnRyb2R1Y3Rpb24gaW4gZHJhZnQgNzpcbiAgICAgICAgICAgICAgICAgICAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1wYW50b3MtaHR0cC1saXZlLXN0cmVhbWluZy0wNyNzZWN0aW9uLTMuMy4xKVxuICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAqIFwiSWYgbyBbb2Zmc2V0XSBpcyBub3QgcHJlc2VudCwgdGhlIHN1Yi1yYW5nZSBiZWdpbnMgYXQgdGhlIG5leHQgYnl0ZVxuICAgICAgICAgICAgICAgICAgICogZm9sbG93aW5nIHRoZSBzdWItcmFuZ2Ugb2YgdGhlIHByZXZpb3VzIG1lZGlhIHNlZ21lbnQuXCJcbiAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgZW50cnkub2Zmc2V0ID0gbGFzdEJ5dGVyYW5nZUVuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoJ29mZnNldCcgaW4gZW50cnkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VXJpLmJ5dGVyYW5nZSA9IGJ5dGVyYW5nZTtcbiAgICAgICAgICAgICAgICBieXRlcmFuZ2Uub2Zmc2V0ID0gZW50cnkub2Zmc2V0O1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgbGFzdEJ5dGVyYW5nZUVuZCA9IGJ5dGVyYW5nZS5vZmZzZXQgKyBieXRlcmFuZ2UubGVuZ3RoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVuZGxpc3Q6IGZ1bmN0aW9uIGVuZGxpc3QoKSB7XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuZW5kTGlzdCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5mOiBmdW5jdGlvbiBpbmYoKSB7XG4gICAgICAgICAgICAgIGlmICghKCdtZWRpYVNlcXVlbmNlJyBpbiB0aGlzLm1hbmlmZXN0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QubWVkaWFTZXF1ZW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdpbmZvJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2RlZmF1bHRpbmcgbWVkaWEgc2VxdWVuY2UgdG8gemVybydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghKCdkaXNjb250aW51aXR5U2VxdWVuY2UnIGluIHRoaXMubWFuaWZlc3QpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5kaXNjb250aW51aXR5U2VxdWVuY2UgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignaW5mbycsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdkZWZhdWx0aW5nIGRpc2NvbnRpbnVpdHkgc2VxdWVuY2UgdG8gemVybydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5kdXJhdGlvbiA+IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VXJpLmR1cmF0aW9uID0gZW50cnkuZHVyYXRpb247XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZW50cnkuZHVyYXRpb24gPT09IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VXJpLmR1cmF0aW9uID0gMC4wMTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2luZm8nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAndXBkYXRpbmcgemVybyBzZWdtZW50IGR1cmF0aW9uIHRvIGEgc21hbGwgdmFsdWUnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnNlZ21lbnRzID0gdXJpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBrZXk6IGZ1bmN0aW9uIGtleSgpIHtcbiAgICAgICAgICAgICAgaWYgKCFlbnRyeS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2lnbm9yaW5nIGtleSBkZWNsYXJhdGlvbiB3aXRob3V0IGF0dHJpYnV0ZSBsaXN0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfSAvLyBjbGVhciB0aGUgYWN0aXZlIGVuY3J5cHRpb24ga2V5XG5cblxuICAgICAgICAgICAgICBpZiAoZW50cnkuYXR0cmlidXRlcy5NRVRIT0QgPT09ICdOT05FJykge1xuICAgICAgICAgICAgICAgIF9rZXkgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghZW50cnkuYXR0cmlidXRlcy5VUkkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaWdub3Jpbmcga2V5IGRlY2xhcmF0aW9uIHdpdGhvdXQgVVJJJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfSAvLyBjaGVjayBpZiB0aGUgY29udGVudCBpcyBlbmNyeXB0ZWQgZm9yIFdpZGV2aW5lXG4gICAgICAgICAgICAgIC8vIFdpZGV2aW5lL0hMUyBzcGVjOiBodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vd3Zkb2NzL1dpZGV2aW5lX0RSTV9ITFMucGRmXG5cblxuICAgICAgICAgICAgICBpZiAoZW50cnkuYXR0cmlidXRlcy5LRVlGT1JNQVQgPT09IHdpZGV2aW5lVXVpZCkge1xuICAgICAgICAgICAgICAgIHZhciBWQUxJRF9NRVRIT0RTID0gWydTQU1QTEUtQUVTJywgJ1NBTVBMRS1BRVMtQ1RSJywgJ1NBTVBMRS1BRVMtQ0VOQyddO1xuXG4gICAgICAgICAgICAgICAgaWYgKFZBTElEX01FVEhPRFMuaW5kZXhPZihlbnRyeS5hdHRyaWJ1dGVzLk1FVEhPRCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbnZhbGlkIGtleSBtZXRob2QgcHJvdmlkZWQgZm9yIFdpZGV2aW5lJ1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmF0dHJpYnV0ZXMuTUVUSE9EID09PSAnU0FNUExFLUFFUy1DRU5DJykge1xuICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd3YXJuJywge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU0FNUExFLUFFUy1DRU5DIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgU0FNUExFLUFFUy1DVFIgaW5zdGVhZCdcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLlVSSS5zdWJzdHJpbmcoMCwgMjMpICE9PSAnZGF0YTp0ZXh0L3BsYWluO2Jhc2U2NCwnKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbnZhbGlkIGtleSBVUkkgcHJvdmlkZWQgZm9yIFdpZGV2aW5lJ1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCEoZW50cnkuYXR0cmlidXRlcy5LRVlJRCAmJiBlbnRyeS5hdHRyaWJ1dGVzLktFWUlELnN1YnN0cmluZygwLCAyKSA9PT0gJzB4JykpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ2ludmFsaWQga2V5IElEIHByb3ZpZGVkIGZvciBXaWRldmluZSdcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gLy8gaWYgV2lkZXZpbmUga2V5IGF0dHJpYnV0ZXMgYXJlIHZhbGlkLCBzdG9yZSB0aGVtIGFzIGBjb250ZW50UHJvdGVjdGlvbmBcbiAgICAgICAgICAgICAgICAvLyBvbiB0aGUgbWFuaWZlc3QgdG8gZW11bGF0ZSBXaWRldmluZSB0YWcgc3RydWN0dXJlIGluIGEgREFTSCBtcGRcblxuXG4gICAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5jb250ZW50UHJvdGVjdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICdjb20ud2lkZXZpbmUuYWxwaGEnOiB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICBzY2hlbWVJZFVyaTogZW50cnkuYXR0cmlidXRlcy5LRVlGT1JNQVQsXG4gICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlICcweCcgZnJvbSB0aGUga2V5IGlkIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgIGtleUlkOiBlbnRyeS5hdHRyaWJ1dGVzLktFWUlELnN1YnN0cmluZygyKVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBkZWNvZGUgdGhlIGJhc2U2NC1lbmNvZGVkIFBTU0ggYm94XG4gICAgICAgICAgICAgICAgICAgIHBzc2g6IGRlY29kZUI2NFRvVWludDhBcnJheShlbnRyeS5hdHRyaWJ1dGVzLlVSSS5zcGxpdCgnLCcpWzFdKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCFlbnRyeS5hdHRyaWJ1dGVzLk1FVEhPRCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdkZWZhdWx0aW5nIGtleSBtZXRob2QgdG8gQUVTLTEyOCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSAvLyBzZXR1cCBhbiBlbmNyeXB0aW9uIGtleSBmb3IgdXBjb21pbmcgc2VnbWVudHNcblxuXG4gICAgICAgICAgICAgIF9rZXkgPSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBlbnRyeS5hdHRyaWJ1dGVzLk1FVEhPRCB8fCAnQUVTLTEyOCcsXG4gICAgICAgICAgICAgICAgdXJpOiBlbnRyeS5hdHRyaWJ1dGVzLlVSSVxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZW50cnkuYXR0cmlidXRlcy5JViAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBfa2V5Lml2ID0gZW50cnkuYXR0cmlidXRlcy5JVjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdtZWRpYS1zZXF1ZW5jZSc6IGZ1bmN0aW9uIG1lZGlhU2VxdWVuY2UoKSB7XG4gICAgICAgICAgICAgIGlmICghaXNGaW5pdGUoZW50cnkubnVtYmVyKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBpbnZhbGlkIG1lZGlhIHNlcXVlbmNlOiAnICsgZW50cnkubnVtYmVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5tZWRpYVNlcXVlbmNlID0gZW50cnkubnVtYmVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdkaXNjb250aW51aXR5LXNlcXVlbmNlJzogZnVuY3Rpb24gZGlzY29udGludWl0eVNlcXVlbmNlKCkge1xuICAgICAgICAgICAgICBpZiAoIWlzRmluaXRlKGVudHJ5Lm51bWJlcikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaWdub3JpbmcgaW52YWxpZCBkaXNjb250aW51aXR5IHNlcXVlbmNlOiAnICsgZW50cnkubnVtYmVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5kaXNjb250aW51aXR5U2VxdWVuY2UgPSBlbnRyeS5udW1iZXI7XG4gICAgICAgICAgICAgIGN1cnJlbnRUaW1lbGluZSA9IGVudHJ5Lm51bWJlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGxheWxpc3QtdHlwZSc6IGZ1bmN0aW9uIHBsYXlsaXN0VHlwZSgpIHtcbiAgICAgICAgICAgICAgaWYgKCEvVk9EfEVWRU5ULy50ZXN0KGVudHJ5LnBsYXlsaXN0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaWdub3JpbmcgdW5rbm93biBwbGF5bGlzdCB0eXBlOiAnICsgZW50cnkucGxheWxpc3RcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnBsYXlsaXN0VHlwZSA9IGVudHJ5LnBsYXlsaXN0VHlwZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYXA6IGZ1bmN0aW9uIG1hcCgpIHtcbiAgICAgICAgICAgICAgY3VycmVudE1hcCA9IHt9O1xuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS51cmkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50TWFwLnVyaSA9IGVudHJ5LnVyaTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5ieXRlcmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50TWFwLmJ5dGVyYW5nZSA9IGVudHJ5LmJ5dGVyYW5nZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdHJlYW0taW5mJzogZnVuY3Rpb24gc3RyZWFtSW5mKCkge1xuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnBsYXlsaXN0cyA9IHVyaXM7XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QubWVkaWFHcm91cHMgPSB0aGlzLm1hbmlmZXN0Lm1lZGlhR3JvdXBzIHx8IGRlZmF1bHRNZWRpYUdyb3VwcztcblxuICAgICAgICAgICAgICBpZiAoIWVudHJ5LmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3dhcm4nLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaWdub3JpbmcgZW1wdHkgc3RyZWFtLWluZiBhdHRyaWJ1dGVzJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghY3VycmVudFVyaS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFVyaS5hdHRyaWJ1dGVzID0ge307XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBfZXh0ZW5kcyhjdXJyZW50VXJpLmF0dHJpYnV0ZXMsIGVudHJ5LmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1lZGlhOiBmdW5jdGlvbiBtZWRpYSgpIHtcbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC5tZWRpYUdyb3VwcyA9IHRoaXMubWFuaWZlc3QubWVkaWFHcm91cHMgfHwgZGVmYXVsdE1lZGlhR3JvdXBzO1xuXG4gICAgICAgICAgICAgIGlmICghKGVudHJ5LmF0dHJpYnV0ZXMgJiYgZW50cnkuYXR0cmlidXRlcy5UWVBFICYmIGVudHJ5LmF0dHJpYnV0ZXNbJ0dST1VQLUlEJ10gJiYgZW50cnkuYXR0cmlidXRlcy5OQU1FKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBpbmNvbXBsZXRlIG9yIG1pc3NpbmcgbWVkaWEgZ3JvdXAnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9IC8vIGZpbmQgdGhlIG1lZGlhIGdyb3VwLCBjcmVhdGluZyBkZWZhdWx0cyBhcyBuZWNlc3NhcnlcblxuXG4gICAgICAgICAgICAgIHZhciBtZWRpYUdyb3VwVHlwZSA9IHRoaXMubWFuaWZlc3QubWVkaWFHcm91cHNbZW50cnkuYXR0cmlidXRlcy5UWVBFXTtcbiAgICAgICAgICAgICAgbWVkaWFHcm91cFR5cGVbZW50cnkuYXR0cmlidXRlc1snR1JPVVAtSUQnXV0gPSBtZWRpYUdyb3VwVHlwZVtlbnRyeS5hdHRyaWJ1dGVzWydHUk9VUC1JRCddXSB8fCB7fTtcbiAgICAgICAgICAgICAgbWVkaWFHcm91cCA9IG1lZGlhR3JvdXBUeXBlW2VudHJ5LmF0dHJpYnV0ZXNbJ0dST1VQLUlEJ11dOyAvLyBjb2xsZWN0IHRoZSByZW5kaXRpb24gbWV0YWRhdGFcblxuICAgICAgICAgICAgICByZW5kaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogL3llcy9pLnRlc3QoZW50cnkuYXR0cmlidXRlcy5ERUZBVUxUKVxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGlmIChyZW5kaXRpb24uZGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIHJlbmRpdGlvbi5hdXRvc2VsZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZW5kaXRpb24uYXV0b3NlbGVjdCA9IC95ZXMvaS50ZXN0KGVudHJ5LmF0dHJpYnV0ZXMuQVVUT1NFTEVDVCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZW50cnkuYXR0cmlidXRlcy5MQU5HVUFHRSkge1xuICAgICAgICAgICAgICAgIHJlbmRpdGlvbi5sYW5ndWFnZSA9IGVudHJ5LmF0dHJpYnV0ZXMuTEFOR1VBR0U7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZW50cnkuYXR0cmlidXRlcy5VUkkpIHtcbiAgICAgICAgICAgICAgICByZW5kaXRpb24udXJpID0gZW50cnkuYXR0cmlidXRlcy5VUkk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoZW50cnkuYXR0cmlidXRlc1snSU5TVFJFQU0tSUQnXSkge1xuICAgICAgICAgICAgICAgIHJlbmRpdGlvbi5pbnN0cmVhbUlkID0gZW50cnkuYXR0cmlidXRlc1snSU5TVFJFQU0tSUQnXTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLkNIQVJBQ1RFUklTVElDUykge1xuICAgICAgICAgICAgICAgIHJlbmRpdGlvbi5jaGFyYWN0ZXJpc3RpY3MgPSBlbnRyeS5hdHRyaWJ1dGVzLkNIQVJBQ1RFUklTVElDUztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChlbnRyeS5hdHRyaWJ1dGVzLkZPUkNFRCkge1xuICAgICAgICAgICAgICAgIHJlbmRpdGlvbi5mb3JjZWQgPSAveWVzL2kudGVzdChlbnRyeS5hdHRyaWJ1dGVzLkZPUkNFRCk7XG4gICAgICAgICAgICAgIH0gLy8gaW5zZXJ0IHRoZSBuZXcgcmVuZGl0aW9uXG5cblxuICAgICAgICAgICAgICBtZWRpYUdyb3VwW2VudHJ5LmF0dHJpYnV0ZXMuTkFNRV0gPSByZW5kaXRpb247XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlzY29udGludWl0eTogZnVuY3Rpb24gZGlzY29udGludWl0eSgpIHtcbiAgICAgICAgICAgICAgY3VycmVudFRpbWVsaW5lICs9IDE7XG4gICAgICAgICAgICAgIGN1cnJlbnRVcmkuZGlzY29udGludWl0eSA9IHRydWU7XG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuZGlzY29udGludWl0eVN0YXJ0cy5wdXNoKHVyaXMubGVuZ3RoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncHJvZ3JhbS1kYXRlLXRpbWUnOiBmdW5jdGlvbiBwcm9ncmFtRGF0ZVRpbWUoKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5tYW5pZmVzdC5kYXRlVGltZVN0cmluZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAvLyBQUk9HUkFNLURBVEUtVElNRSBpcyBhIG1lZGlhLXNlZ21lbnQgdGFnLCBidXQgZm9yIGJhY2t3YXJkc1xuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGliaWxpdHksIHdlIGFkZCB0aGUgZmlyc3Qgb2NjdXJlbmNlIG9mIHRoZSBQUk9HUkFNLURBVEUtVElNRSB0YWdcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgbWFuaWZlc3Qgb2JqZWN0XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgcmVtb3ZpbmcgdGhpcyBpbiBmdXR1cmUgbWFqb3IgdmVyc2lvblxuICAgICAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuZGF0ZVRpbWVTdHJpbmcgPSBlbnRyeS5kYXRlVGltZVN0cmluZztcbiAgICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmRhdGVUaW1lT2JqZWN0ID0gZW50cnkuZGF0ZVRpbWVPYmplY3Q7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjdXJyZW50VXJpLmRhdGVUaW1lU3RyaW5nID0gZW50cnkuZGF0ZVRpbWVTdHJpbmc7XG4gICAgICAgICAgICAgIGN1cnJlbnRVcmkuZGF0ZVRpbWVPYmplY3QgPSBlbnRyeS5kYXRlVGltZU9iamVjdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0YXJnZXRkdXJhdGlvbjogZnVuY3Rpb24gdGFyZ2V0ZHVyYXRpb24oKSB7XG4gICAgICAgICAgICAgIGlmICghaXNGaW5pdGUoZW50cnkuZHVyYXRpb24pIHx8IGVudHJ5LmR1cmF0aW9uIDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBpbnZhbGlkIHRhcmdldCBkdXJhdGlvbjogJyArIGVudHJ5LmR1cmF0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5tYW5pZmVzdC50YXJnZXREdXJhdGlvbiA9IGVudHJ5LmR1cmF0aW9uO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvdGFsZHVyYXRpb246IGZ1bmN0aW9uIHRvdGFsZHVyYXRpb24oKSB7XG4gICAgICAgICAgICAgIGlmICghaXNGaW5pdGUoZW50cnkuZHVyYXRpb24pIHx8IGVudHJ5LmR1cmF0aW9uIDwgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBpbnZhbGlkIHRvdGFsIGR1cmF0aW9uOiAnICsgZW50cnkuZHVyYXRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB0aGlzLm1hbmlmZXN0LnRvdGFsRHVyYXRpb24gPSBlbnRyeS5kdXJhdGlvbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgICAgICAgIGlmICghZW50cnkuYXR0cmlidXRlcyB8fCBpc05hTihlbnRyeS5hdHRyaWJ1dGVzWydUSU1FLU9GRlNFVCddKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpZ25vcmluZyBzdGFydCBkZWNsYXJhdGlvbiB3aXRob3V0IGFwcHJvcHJpYXRlIGF0dHJpYnV0ZSBsaXN0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMubWFuaWZlc3Quc3RhcnQgPSB7XG4gICAgICAgICAgICAgICAgdGltZU9mZnNldDogZW50cnkuYXR0cmlidXRlc1snVElNRS1PRkZTRVQnXSxcbiAgICAgICAgICAgICAgICBwcmVjaXNlOiBlbnRyeS5hdHRyaWJ1dGVzLlBSRUNJU0VcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnY3VlLW91dCc6IGZ1bmN0aW9uIGN1ZU91dCgpIHtcbiAgICAgICAgICAgICAgY3VycmVudFVyaS5jdWVPdXQgPSBlbnRyeS5kYXRhO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdjdWUtb3V0LWNvbnQnOiBmdW5jdGlvbiBjdWVPdXRDb250KCkge1xuICAgICAgICAgICAgICBjdXJyZW50VXJpLmN1ZU91dENvbnQgPSBlbnRyeS5kYXRhO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdjdWUtaW4nOiBmdW5jdGlvbiBjdWVJbigpIHtcbiAgICAgICAgICAgICAgY3VycmVudFVyaS5jdWVJbiA9IGVudHJ5LmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlbZW50cnkudGFnVHlwZV0gfHwgbm9vcCkuY2FsbChzZWxmKTtcbiAgICAgICAgfSxcbiAgICAgICAgdXJpOiBmdW5jdGlvbiB1cmkoKSB7XG4gICAgICAgICAgY3VycmVudFVyaS51cmkgPSBlbnRyeS51cmk7XG4gICAgICAgICAgdXJpcy5wdXNoKGN1cnJlbnRVcmkpOyAvLyBpZiBubyBleHBsaWNpdCBkdXJhdGlvbiB3YXMgZGVjbGFyZWQsIHVzZSB0aGUgdGFyZ2V0IGR1cmF0aW9uXG5cbiAgICAgICAgICBpZiAodGhpcy5tYW5pZmVzdC50YXJnZXREdXJhdGlvbiAmJiAhKCdkdXJhdGlvbicgaW4gY3VycmVudFVyaSkpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignd2FybicsIHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ2RlZmF1bHRpbmcgc2VnbWVudCBkdXJhdGlvbiB0byB0aGUgdGFyZ2V0IGR1cmF0aW9uJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjdXJyZW50VXJpLmR1cmF0aW9uID0gdGhpcy5tYW5pZmVzdC50YXJnZXREdXJhdGlvbjtcbiAgICAgICAgICB9IC8vIGFubm90YXRlIHdpdGggZW5jcnlwdGlvbiBpbmZvcm1hdGlvbiwgaWYgbmVjZXNzYXJ5XG5cblxuICAgICAgICAgIGlmIChfa2V5KSB7XG4gICAgICAgICAgICBjdXJyZW50VXJpLmtleSA9IF9rZXk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY3VycmVudFVyaS50aW1lbGluZSA9IGN1cnJlbnRUaW1lbGluZTsgLy8gYW5ub3RhdGUgd2l0aCBpbml0aWFsaXphdGlvbiBzZWdtZW50IGluZm9ybWF0aW9uLCBpZiBuZWNlc3NhcnlcblxuICAgICAgICAgIGlmIChjdXJyZW50TWFwKSB7XG4gICAgICAgICAgICBjdXJyZW50VXJpLm1hcCA9IGN1cnJlbnRNYXA7XG4gICAgICAgICAgfSAvLyBwcmVwYXJlIGZvciB0aGUgbmV4dCBVUklcblxuXG4gICAgICAgICAgY3VycmVudFVyaSA9IHt9O1xuICAgICAgICB9LFxuICAgICAgICBjb21tZW50OiBmdW5jdGlvbiBjb21tZW50KCkgey8vIGNvbW1lbnRzIGFyZSBub3QgaW1wb3J0YW50IGZvciBwbGF5YmFja1xuICAgICAgICB9LFxuICAgICAgICBjdXN0b206IGZ1bmN0aW9uIGN1c3RvbSgpIHtcbiAgICAgICAgICAvLyBpZiB0aGlzIGlzIHNlZ21lbnQtbGV2ZWwgZGF0YSBhdHRhY2ggdGhlIG91dHB1dCB0byB0aGUgc2VnbWVudFxuICAgICAgICAgIGlmIChlbnRyeS5zZWdtZW50KSB7XG4gICAgICAgICAgICBjdXJyZW50VXJpLmN1c3RvbSA9IGN1cnJlbnRVcmkuY3VzdG9tIHx8IHt9O1xuICAgICAgICAgICAgY3VycmVudFVyaS5jdXN0b21bZW50cnkuY3VzdG9tVHlwZV0gPSBlbnRyeS5kYXRhOyAvLyBpZiB0aGlzIGlzIG1hbmlmZXN0LWxldmVsIGRhdGEgYXR0YWNoIHRvIHRoZSB0b3AgbGV2ZWwgbWFuaWZlc3Qgb2JqZWN0XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWFuaWZlc3QuY3VzdG9tID0gdGhpcy5tYW5pZmVzdC5jdXN0b20gfHwge307XG4gICAgICAgICAgICB0aGlzLm1hbmlmZXN0LmN1c3RvbVtlbnRyeS5jdXN0b21UeXBlXSA9IGVudHJ5LmRhdGE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVtlbnRyeS50eXBlXS5jYWxsKHNlbGYpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBQYXJzZSB0aGUgaW5wdXQgc3RyaW5nIGFuZCB1cGRhdGUgdGhlIG1hbmlmZXN0IG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNodW5rIGEgcG90ZW50aWFsbHkgaW5jb21wbGV0ZSBwb3J0aW9uIG9mIHRoZSBtYW5pZmVzdFxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBQYXJzZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5wdXNoID0gZnVuY3Rpb24gcHVzaChjaHVuaykge1xuICAgIHRoaXMubGluZVN0cmVhbS5wdXNoKGNodW5rKTtcbiAgfVxuICAvKipcbiAgICogRmx1c2ggYW55IHJlbWFpbmluZyBpbnB1dC4gVGhpcyBjYW4gYmUgaGFuZHkgaWYgdGhlIGxhc3QgbGluZSBvZiBhbiBNM1U4XG4gICAqIG1hbmlmZXN0IGRpZCBub3QgY29udGFpbiBhIHRyYWlsaW5nIG5ld2xpbmUgYnV0IHRoZSBmaWxlIGhhcyBiZWVuXG4gICAqIGNvbXBsZXRlbHkgcmVjZWl2ZWQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmVuZCA9IGZ1bmN0aW9uIGVuZCgpIHtcbiAgICAvLyBmbHVzaCBhbnkgYnVmZmVyZWQgaW5wdXRcbiAgICB0aGlzLmxpbmVTdHJlYW0ucHVzaCgnXFxuJyk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhbiBhZGRpdGlvbmFsIHBhcnNlciBmb3Igbm9uLXN0YW5kYXJkIHRhZ3NcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgb3B0aW9ucyAgICAgICAgICAgICAgYSBtYXAgb2Ygb3B0aW9ucyBmb3IgdGhlIGFkZGVkIHBhcnNlclxuICAgKiBAcGFyYW0ge1JlZ0V4cH0gICBvcHRpb25zLmV4cHJlc3Npb24gICBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCB0aGUgY3VzdG9tIGhlYWRlclxuICAgKiBAcGFyYW0ge3N0cmluZ30gICBvcHRpb25zLnR5cGUgICAgICAgICB0aGUgdHlwZSB0byByZWdpc3RlciB0byB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmRhdGFQYXJzZXJdIGZ1bmN0aW9uIHRvIHBhcnNlIHRoZSBsaW5lIGludG8gYW4gb2JqZWN0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gIFtvcHRpb25zLnNlZ21lbnRdICAgIHNob3VsZCB0YWcgZGF0YSBiZSBhdHRhY2hlZCB0byB0aGUgc2VnbWVudCBvYmplY3RcbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkUGFyc2VyID0gZnVuY3Rpb24gYWRkUGFyc2VyKG9wdGlvbnMpIHtcbiAgICB0aGlzLnBhcnNlU3RyZWFtLmFkZFBhcnNlcihvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgY3VzdG9tIGhlYWRlciBtYXBwZXJcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICAgb3B0aW9uc1xuICAgKiBAcGFyYW0ge1JlZ0V4cH0gICBvcHRpb25zLmV4cHJlc3Npb24gICBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCB0aGUgY3VzdG9tIGhlYWRlclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm1hcCAgICAgICAgICBmdW5jdGlvbiB0byB0cmFuc2xhdGUgdGFnIGludG8gYSBkaWZmZXJlbnQgdGFnXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFkZFRhZ01hcHBlciA9IGZ1bmN0aW9uIGFkZFRhZ01hcHBlcihvcHRpb25zKSB7XG4gICAgdGhpcy5wYXJzZVN0cmVhbS5hZGRUYWdNYXBwZXIob3B0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIFBhcnNlcjtcbn0oU3RyZWFtKTtcblxuZXhwb3J0IHsgTGluZVN0cmVhbSwgUGFyc2VTdHJlYW0sIFBhcnNlciB9O1xuIiwiaW1wb3J0IHsgUGFyc2VyIH0gZnJvbSAnbTN1OC1wYXJzZXInXG5cbmNvbnN0IGRvd25sb2FkTTNVOCA9IGFzeW5jICh1cmw6IHN0cmluZykgPT4ge1xuICByZXR1cm4gZmV0Y2godXJsKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KVxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS50ZXh0KClcbiAgfSlcbn1cblxuY29uc3QgcGFyc2VNM1U4ID0gKG0zdTg6IHN0cmluZykgPT4ge1xuICBjb25zdCBwYXJzZXIgPSBuZXcgUGFyc2VyKClcbiAgcGFyc2VyLnB1c2gobTN1OClcbiAgcGFyc2VyLmVuZCgpXG4gIHJldHVybiBwYXJzZXIubWFuaWZlc3Rcbn1cblxuY29uc3QgZG93bmxvYWRTZWdtZW50cyA9IGFzeW5jIChtYW5pZmVzdDogYW55KTogUHJvbWlzZTxBcnJheUJ1ZmZlcltdPiA9PiB7XG4gIGNvbnN0IHVybHMgPSBtYW5pZmVzdC5zZWdtZW50cy5tYXAoc2VnbWVudCA9PiBzZWdtZW50LnVyaSlcbiAgY29uc3QgcHJvbWlzZXM6IFByb21pc2U8QXJyYXlCdWZmZXI+W10gPSB1cmxzLm1hcChhc3luYyB1cmwgPT4gYXdhaXQgZmV0Y2godXJsKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KVxuICAgIH1cblxuICAgIGlmIChyZXNwb25zZS5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJykudG9Mb3dlckNhc2UoKSA9PT0gJ2F1ZGlvL21wZWcnKSB7XG4gICAgICB0aHJvdyBFcnJvcignR290IGludmFsaWQgQ29udGVudC1UeXBlIHdoaWxlIGRvd25sb2FkaW5nIEhMUyBzZWdtZW50czogJyArIHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdDb250ZW50LVR5cGUnKSlcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKVxuICB9KSlcbiAgcmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKVxufVxuXG5pbnRlcmZhY2UgRG93bmxvYWRPcHRpb25zIHtcbiAgdXJsPzogc3RyaW5nLFxuICBtM3U4Pzogc3RyaW5nXG59XG5cbmV4cG9ydCBjb25zdCBkb3dubG9hZCA9IGFzeW5jIChvcHRpb25zOiBEb3dubG9hZE9wdGlvbnMpID0+IHtcbiAgbGV0IG0zdThcbiAgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgbTN1OCA9IGF3YWl0IGRvd25sb2FkTTNVOChvcHRpb25zLnVybClcbiAgfVxuICBpZiAoIW9wdGlvbnMudXJsICYmICFvcHRpb25zLm0zdTgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVybCBvciBtM3U4IHN0cmluZyBzcGVjaWZpZWQnKVxuICB9XG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlTTNVOChtM3U4KVxuICBpZiAocGFyc2VkLnNlZ21lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignR290IGFuIGludmFsaWQgTTNVOCBmaWxlLCBjaGVjayB0aGUgcHJvdmlkZWQgVVJMIG9yIG0zdTggc3RyaW5nIGlzIHZhbGlkJylcbiAgfVxuICBjb25zdCBzZWdtZW50cyA9IGF3YWl0IGRvd25sb2FkU2VnbWVudHMocGFyc2VkKVxuICBjb25zdCBibG9iID0gbmV3IEJsb2Ioc2VnbWVudHMpXG4gIHJldHVybiBibG9iXG59XG5cbmV4cG9ydCBjb25zdCBkb3dubG9hZFRvRmlsZSA9IGFzeW5jIChvcHRpb25zOiBEb3dubG9hZE9wdGlvbnMsIGZpbGVuYW1lOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgYmxvYiA9IGF3YWl0IGRvd25sb2FkKG9wdGlvbnMpXG4gIGNvbnN0IFVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTFxuICBjb25zdCB1ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKVxuICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gIGEuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICBhLmhyZWYgPSB1XG4gIGEuZG93bmxvYWQgPSBmaWxlbmFtZVxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpXG4gIGEuY2xpY2soKVxuICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1KVxufVxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gbW9kdWxlWydkZWZhdWx0J10gOlxuXHRcdCgpID0+IG1vZHVsZTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiXSwic291cmNlUm9vdCI6IiJ9